(()=>{var e={};e.id=74,e.ids=[74],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5393:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(7428),s(3315),s(5866),s(2029);var a=s(3191),l=s(8716),r=s(7922),n=s.n(r),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(app)",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7428)),"C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\(app)\\calendar\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3315)),"C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\(app)\\calendar\\page.tsx"],x="/(app)/calendar/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(app)/calendar/page",pathname:"/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},519:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},3934:(e,t,s)=>{Promise.resolve().then(s.bind(s,8668))},6215:()=>{},3197:(e,t,s)=>{Promise.resolve().then(s.bind(s,580))},8668:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(326),l=s(434),r=s(7577),n=s(6792),i=s(9837),o=s(5329);let d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],c=["Draft","Doc","Posted","Notice","Done"],x={Draft:{dot:"bg-slate-400",badge:"bg-slate-100 text-slate-600",text:"text-slate-600"},Doc:{dot:"bg-amber-400",badge:"bg-amber-100 text-amber-700",text:"text-amber-700"},Posted:{dot:"bg-sky-400",badge:"bg-sky-100 text-sky-700",text:"text-sky-700"},Notice:{dot:"bg-violet-400",badge:"bg-violet-100 text-violet-700",text:"text-violet-700"},Done:{dot:"bg-emerald-400",badge:"bg-emerald-100 text-emerald-700",text:"text-emerald-700"}},m=e=>{let t=e.getFullYear(),s=`${e.getMonth()+1}`.padStart(2,"0"),a=`${e.getDate()}`.padStart(2,"0");return`${t}-${s}-${a}`},u=e=>new Date(e.getFullYear(),e.getMonth(),1),p=e=>new Date(e.getFullYear(),e.getMonth()+1,0),h=(e,t)=>{let s=new Date(e);return s.setDate(s.getDate()+t),s},b=e=>h(e,-e.getDay()),g=e=>h(e,6-e.getDay()),f=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth(),j=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),v=(e,t)=>e||t?e&&t?`${e} - ${t}`:e?`${e} -`:`- ${t}`:"ไม่ระบุเวลา";function y(){let[e,t]=(0,r.useState)(()=>new Date),[s,y]=(0,r.useState)([]),[N,w]=(0,r.useState)(!0),[k,P]=(0,r.useState)(null),[D,S]=(0,r.useState)(null),[$,C]=(0,r.useState)(!1),[M,_]=(0,r.useState)([]),[Y,Z]=(0,r.useState)(!1),[K,B]=(0,r.useState)(null),q=(0,r.useMemo)(()=>u(e),[e]),F=(0,r.useMemo)(()=>p(e),[e]),z=(0,r.useMemo)(()=>b(q),[q]),U=(0,r.useMemo)(()=>g(F),[F]),O=(0,r.useMemo)(()=>{let e=[],t=z;for(;t<=U;)e.push(t),t=h(t,1);return e},[z,U]),W=(0,r.useMemo)(()=>{let e=new Map;return s.forEach(t=>{e.set(t.date,t)}),e},[s]),A=(0,r.useMemo)(()=>e.toLocaleString("en-US",{month:"long",year:"numeric"}),[e]),E=(0,r.useMemo)(()=>{let e={total:0,done:0,notice:0,posted:0};return s.forEach(t=>{e.total+=t.total,e.done+=t.byStatus.Done??0,e.notice+=t.byStatus.Notice??0,e.posted+=t.byStatus.Posted??0}),e},[s]),T=e=>{S(e),C(!0)},J=()=>{C(!1),_([]),B(null)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{className:"space-y-3",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Schedule"}),a.jsx("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900",children:"Calendar"}),a.jsx("p",{className:"text-sm text-slate-600",children:"ภาพรวมปฏิทินงานและการติดตามเอกสารในเดือนนี้"})]}),a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"flex flex-wrap items-center justify-between gap-4 py-5",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.25em] text-slate-400",children:"Month view"}),a.jsx("h2",{className:"mt-2 text-2xl font-semibold text-slate-900",children:A})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(i.Z,{type:"button",variant:"secondary",size:"sm",onClick:()=>{t(e=>new Date(e.getFullYear(),e.getMonth()-1,1))},children:"Previous"}),a.jsx(i.Z,{type:"button",variant:"secondary",size:"sm",onClick:()=>{t(e=>new Date(e.getFullYear(),e.getMonth()+1,1))},children:"Next"})]})]})}),(0,a.jsxs)("section",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"space-y-2 py-5",children:[a.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total outages this month"}),a.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:E.total}),a.jsx("p",{className:"text-sm text-slate-500",children:"รายการที่ถูกบันทึกไว้ในเดือนนี้"})]})}),a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"space-y-2 py-5",children:[a.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Posted & notice"}),a.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:E.posted+E.notice}),a.jsx("p",{className:"text-sm text-slate-500",children:"งานที่มีประกาศหรือโพสต์แล้วในเดือนนี้"})]})}),a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"space-y-2 py-5",children:[a.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Completed"}),a.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:E.done}),a.jsx("p",{className:"text-sm text-slate-500",children:"งานที่ปิดสำเร็จแล้ว"})]})})]}),a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"py-6",children:[a.jsx("div",{className:"grid grid-cols-7 gap-2 text-xs font-semibold uppercase tracking-wide text-slate-400",children:d.map(e=>a.jsx("div",{className:"px-2",children:e},e))}),a.jsx("div",{className:"mt-3 grid grid-cols-7 gap-3",children:O.map(t=>{let s=m(t),l=W.get(s),r=f(t,e),i=!!D&&j(t,D);return(0,a.jsxs)("button",{type:"button",onClick:()=>T(t),className:`flex min-h-[120px] flex-col gap-2 rounded-2xl border px-3 py-3 text-left transition hover:border-slate-300 hover:bg-slate-50/60 ${i?"border-slate-400 bg-slate-50":"border-slate-200/70 bg-white"} ${r?"":"text-slate-400"}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold",children:t.getDate()}),l?.total?a.jsx(n.Z,{variant:"neutral",children:l.total}):null]}),N?a.jsx("div",{className:"mt-2 h-12 rounded-xl bg-slate-100"}):k?a.jsx("p",{className:"text-xs text-rose-500",children:"โหลดไม่สำเร็จ"}):l?a.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(e=>{let t=l.byStatus[e];return t?(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 px-2 py-0.5 text-[11px] font-semibold text-slate-600",children:[a.jsx("span",{className:`h-2 w-2 rounded-full ${x[e].dot}`}),e," ",t]},`${s}-${e}`):null})}):a.jsx("p",{className:"text-xs text-slate-400",children:"ไม่มีงาน"})]},s)})})]})}),$?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex justify-end",children:[a.jsx("button",{type:"button",className:"absolute inset-0 bg-slate-900/40",onClick:J,"aria-label":"Close calendar drawer"}),(0,a.jsxs)("div",{className:"relative flex h-full w-full max-w-md flex-col bg-white shadow-2xl",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between border-b border-slate-200 px-6 py-5",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:"Daily outages"}),a.jsx("h2",{className:"mt-2 text-xl font-semibold text-slate-900",children:D?D.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):""})]}),a.jsx(i.Z,{type:"button",variant:"ghost",size:"sm",onClick:J,children:"ปิด"})]}),a.jsx("div",{className:"flex-1 space-y-4 overflow-y-auto px-6 py-5",children:Y?a.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((e,t)=>a.jsx("div",{className:"h-20 rounded-2xl border border-slate-200 bg-slate-50"},`skeleton-${t}`))}):K?a.jsx("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-600",children:K}):M.length?a.jsx("div",{className:"space-y-3",children:M.map(e=>{let t=c.find(t=>t===e.status),s=t?x[t].badge:"bg-slate-100 text-slate-600";return(0,a.jsxs)(l.default,{href:`/job/${e.id}`,className:"flex flex-col gap-3 rounded-2xl border border-slate-200/70 bg-white px-4 py-4 transition hover:border-slate-300 hover:bg-slate-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:v(e.time_start,e.time_end)}),a.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${s}`,children:e.status})]}),a.jsx("p",{className:"text-sm text-slate-600",children:e.area_title??"ไม่ระบุพื้นที่"})]},e.id)})}):a.jsx("div",{className:"rounded-2xl border border-dashed border-slate-200 bg-slate-50 px-4 py-6 text-center text-sm text-slate-500",children:"ยังไม่มีงานในวันนี้"})})]})]}):null]})}},580:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(326),l=s(7577),r=s(434),n=s(5047);let i=[{label:"Dashboard",href:"/dashboard"},{label:"Jobs",href:"/jobs"},{label:"Calendar",href:"/calendar"}];function o({isOpen:e,onClose:t}){let s=(0,n.usePathname)(),l=()=>(0,a.jsxs)("div",{className:"flex h-full flex-col bg-white/80 px-5 py-6 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[a.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-gradient-to-tr from-fuchsia-500 via-purple-500 to-pink-500 text-sm font-semibold text-white shadow-md",children:"KB"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"KB Outage"}),a.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Operations"})]})]}),a.jsx("nav",{className:"mt-8 flex-1 space-y-2",children:i.map(e=>{let l=s===e.href||s.startsWith(`${e.href}/`)||"/jobs"===e.href&&s.startsWith("/job/");return(0,a.jsxs)(r.default,{href:e.href,className:`flex items-center justify-between rounded-full px-4 py-2 text-sm font-medium transition ${l?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:bg-white/70 hover:text-slate-900"}`,onClick:t,children:[a.jsx("span",{children:e.label}),l?a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-gradient-to-r from-fuchsia-500 to-pink-500"}):null]},e.href)})}),a.jsx("div",{className:"rounded-2xl border border-slate-200/80 bg-white px-4 py-4 text-xs text-slate-500 shadow-sm",children:"Premium console layout • v2"})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:`fixed inset-0 z-40 transition lg:hidden ${e?"pointer-events-auto":"pointer-events-none"}`,children:[a.jsx("div",{className:`absolute inset-0 bg-slate-900/40 transition-opacity ${e?"opacity-100":"opacity-0"}`,onClick:t}),a.jsx("aside",{className:`absolute left-0 top-0 h-full w-72 transform bg-white shadow-xl transition-transform ${e?"translate-x-0":"-translate-x-full"}`,children:l()})]}),a.jsx("aside",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col lg:border-r lg:border-slate-200/70 lg:bg-white/80 lg:backdrop-blur-xl",children:l()})]})}var d=s(6792),c=s(9837);let x={"/dashboard":"Dashboard","/jobs":"Jobs","/calendar":"Calendar","/job":"Job detail"},m=e=>{let t=Object.keys(x).find(t=>e===t||e.startsWith(`${t}/`));return t?x[t]:"KB Outage"};function u({onMenuClick:e}){let t=(0,n.usePathname)(),s=m(t),l="/dashboard"===t||t.startsWith("/dashboard/"),i="/jobs"===t||t.startsWith("/jobs/"),o="/calendar"===t||t.startsWith("/calendar/"),x=t.startsWith("/job/");return a.jsx("header",{className:"sticky top-0 z-30 border-b border-slate-200/70 bg-white/80 backdrop-blur",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-200/80 bg-white text-slate-600 shadow-sm transition hover:bg-slate-50 lg:hidden","aria-label":"Open menu",children:"☰"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Current view"}),a.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-900",children:s})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l?a.jsx(r.default,{href:"/jobs",className:(0,c.$)({variant:"secondary",size:"sm"}),children:"ดูงานทั้งหมด"}):null,i?a.jsx(r.default,{href:"/new",className:(0,c.$)({variant:"primary",size:"sm"}),children:"+ สร้างงาน"}):null,o?a.jsx(r.default,{href:"/jobs",className:(0,c.$)({variant:"secondary",size:"sm"}),children:"ไปที่ Jobs"}):null,x?a.jsx(r.default,{href:"/jobs",className:(0,c.$)({variant:"secondary",size:"sm"}),children:"กลับไป Jobs"}):null,a.jsx(d.Z,{variant:"accent",children:"Premium"})]})]})})}function p({children:e}){let[t,s]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"min-h-screen bg-[#fafafa] text-slate-900",children:[a.jsx(o,{isOpen:t,onClose:()=>s(!1)}),(0,a.jsxs)("div",{className:"flex min-h-screen flex-col lg:pl-72",children:[a.jsx(u,{onMenuClick:()=>s(!0)}),a.jsx("main",{className:"flex-1 px-4 pb-12 pt-6 sm:px-6 lg:px-10",children:a.jsx("div",{className:"mx-auto w-full max-w-6xl",children:e})})]})]})}},6792:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(326),l=s(1223);let r={default:"border border-slate-200/80 bg-slate-100/70 text-slate-600",accent:"border border-fuchsia-200/70 bg-fuchsia-50 text-fuchsia-700",success:"border border-emerald-200/80 bg-emerald-50 text-emerald-700",warning:"border border-amber-200/80 bg-amber-50 text-amber-700",danger:"border border-rose-200/80 bg-rose-50 text-rose-700",neutral:"border border-slate-200/70 bg-white text-slate-700"};function n({variant:e="default",className:t,...s}){return a.jsx("span",{...s,className:(0,l.cn)("inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold",r[e],t)})}},9837:(e,t,s)=>{"use strict";s.d(t,{$:()=>i,Z:()=>o});var a=s(326),l=s(1223);let r={primary:"bg-gradient-to-r from-fuchsia-500 via-purple-500 to-pink-500 text-white shadow-[0_16px_30px_rgba(236,72,153,0.25)] hover:brightness-110",secondary:"border border-slate-200/80 bg-white text-slate-700 shadow-sm hover:bg-slate-50",ghost:"text-slate-600 hover:bg-slate-100/80 hover:text-slate-900"},n={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-sm"};function i({variant:e="primary",size:t="md",className:s}){return(0,l.cn)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-full font-medium transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-300 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-60",r[e],n[t],s)}function o({className:e,variant:t,size:s,...l}){return a.jsx("button",{...l,className:i({variant:t,size:s,className:e})})}},5329:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>o,Zb:()=>r,aY:()=>d,ll:()=>i});var a=s(326),l=s(1223);function r({className:e,...t}){return a.jsx("div",{...t,className:(0,l.cn)("rounded-2xl border border-slate-200/70 bg-white shadow-sm",e)})}function n({className:e,...t}){return a.jsx("div",{...t,className:(0,l.cn)("px-5 pt-5",e)})}function i({className:e,...t}){return a.jsx("h3",{...t,className:(0,l.cn)("text-lg font-semibold tracking-tight text-slate-900",e)})}function o({className:e,...t}){return a.jsx("p",{...t,className:(0,l.cn)("text-sm text-slate-600",e)})}function d({className:e,...t}){return a.jsx("div",{...t,className:(0,l.cn)("px-5 pb-5",e)})}},1223:(e,t,s)=>{"use strict";function a(...e){return e.filter(Boolean).join(" ")}s.d(t,{cn:()=>a})},7428:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});var a=s(8570);let l=(0,a.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\app\(app)\calendar\page.tsx`),{__esModule:r,$$typeof:n}=l;l.default;let i=(0,a.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\app\(app)\calendar\page.tsx#default`)},3315:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(9510),l=s(8570);let r=(0,l.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\components\layout\AppShell.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let o=(0,l.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\components\layout\AppShell.tsx#default`);function d({children:e}){return a.jsx(o,{children:e})}},2029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r,metadata:()=>l});var a=s(9510);s(5023);let l={title:"Krabi Outage Tracker",description:"Track planned outages in Krabi."};function r({children:e}){return a.jsx("html",{lang:"th",children:a.jsx("body",{children:a.jsx("div",{className:"min-h-screen",children:a.jsx("main",{className:"mx-auto flex w-full max-w-5xl flex-col px-4 py-8",children:e})})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471,496],()=>s(5393));module.exports=a})();