(()=>{var e={};e.id=853,e.ids=[853],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5724:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(5377),s(3315),s(5866),s(2029);var a=s(3191),l=s(8716),r=s(7922),n=s.n(r),i=s(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["(app)",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5377)),"C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\(app)\\jobs\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3315)),"C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\(app)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2029)),"C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\506870\\Desktop\\KB-outage\\src\\app\\(app)\\jobs\\page.tsx"],u="/(app)/jobs/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(app)/jobs/page",pathname:"/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5073:(e,t,s)=>{Promise.resolve().then(s.bind(s,8440))},3197:(e,t,s)=>{Promise.resolve().then(s.bind(s,580))},8440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(326),l=s(5047),r=s(7577),n=s(4029),i=s(7687),o=s(9068),d=s(9837);function c(e){return new Date(`${e}T00:00:00`)}function u(e){let t=new Date(e);return t.setHours(0,0,0,0),t}function x(e){let t=function(e,t){let s=u(e).getTime();return Math.round((u(t).getTime()-s)/864e5)}(u(new Date),u(c(e.outage_date))),s=t<0?`à¹€à¸¥à¸¢à¸à¸³à¸«à¸™à¸” ${Math.abs(t)} à¸§à¸±à¸™`:0===t?"à¸§à¸±à¸™à¸™à¸µà¹‰":1===t?"à¸žà¸£à¸¸à¹ˆà¸‡à¸™à¸µà¹‰":`à¹€à¸«à¸¥à¸·à¸­ ${t} à¸§à¸±à¸™`;return t<0?{daysLeft:t,color:"RED",label:s}:"PENDING"===(e.nakhon_status??"PENDING")?t<14?{daysLeft:t,color:"RED",label:s}:t<=28?{daysLeft:t,color:"YELLOW",label:s}:{daysLeft:t,color:"GREEN",label:s}:t<3?{daysLeft:t,color:"RED",label:s}:t<=6?{daysLeft:t,color:"YELLOW",label:s}:{daysLeft:t,color:"GREEN",label:s}}let m=["à¸¡à¸à¸£à¸²à¸„à¸¡","à¸à¸¸à¸¡à¸ à¸²à¸žà¸±à¸™à¸˜à¹Œ","à¸¡à¸µà¸™à¸²à¸„à¸¡","à¹€à¸¡à¸©à¸²à¸¢à¸™","à¸žà¸¤à¸©à¸ à¸²à¸„à¸¡","à¸¡à¸´à¸–à¸¸à¸™à¸²à¸¢à¸™","à¸à¸£à¸à¸Žà¸²à¸„à¸¡","à¸ªà¸´à¸‡à¸«à¸²à¸„à¸¡","à¸à¸±à¸™à¸¢à¸²à¸¢à¸™","à¸•à¸¸à¸¥à¸²à¸„à¸¡","à¸žà¸¤à¸¨à¸ˆà¸´à¸à¸²à¸¢à¸™","à¸˜à¸±à¸™à¸§à¸²à¸„à¸¡"];function p(e){let t=e.doc_purpose??"",s=e.doc_area_title??"",a=e.doc_time_start??"",l=e.doc_time_end??"",r=e.doc_area_detail??"",n=e.map_link??"",i=function(e){if(!e)return"";let t=c(e),s=t.getDate(),a=m[t.getMonth()]??"",l=t.getFullYear()+543;return`${s} ${a} ${l}`.trim()}(e.outage_date);return`à¹€à¸žà¸·à¹ˆà¸­${t} à¸šà¸£à¸´à¹€à¸§à¸“ ${s}
ðŸ“…${i}
â˜£ï¸à¹‚à¸‹à¸™à¸ªà¸µà¹€à¸«à¸¥à¸·à¸­à¸‡ à¹à¸ªà¸”à¸‡à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¹„à¸Ÿà¸”à¸±à¸š à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆà¹€à¸§à¸¥à¸² ${a} .- ${l} à¸™.
ðŸŒà¸šà¸£à¸´à¹€à¸§à¸“à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¹„à¸Ÿà¹„à¸”à¹‰à¸£à¸±à¸šà¸œà¸¥à¸à¸£à¸°à¸—à¸š ${r}
ðŸ“Œà¸à¸”à¸¥à¸´à¹‰à¸‡à¸„à¹Œ ðŸ‘‡ à¹€à¸žà¸·à¹ˆà¸­à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¹„à¸Ÿà¸”à¸±à¸š ${n}`}function h({job:e,isOpen:t,onClose:s,onJobUpdate:l}){let[o,c]=(0,r.useState)(!1),[u,x]=(0,r.useState)(null),m=(0,r.useMemo)(()=>e?e.social_post_text?.trim()?e.social_post_text:p(e):"",[e]),h=async(e=!0)=>{if(m)try{await navigator.clipboard.writeText(m),e&&x("à¸„à¸±à¸”à¸¥à¸­à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹à¸¥à¹‰à¸§ â€” à¹„à¸›à¸§à¸²à¸‡à¹ƒà¸™ Facebook/LINE à¹„à¸”à¹‰à¹€à¸¥à¸¢")}catch(t){console.error("Failed to copy text",t),e&&x("à¸„à¸±à¸”à¸¥à¸­à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ")}},f=async()=>{if(e&&m){if("POSTED"===e.social_status){await h();return}c(!0);try{let t=await fetch("/api/jobs/social-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:e.id})}),a=await t.json().catch(()=>null);if(!t.ok||!a?.ok)throw Error(a?.error??"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹‚à¸žà¸ªà¸•à¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹„à¸”à¹‰");let r=a.social_posted_at??new Date().toISOString(),n=a.social_post_text??a.preview_text??p(e);l(e.id,{...a.job??{},social_status:a.social_status??"POSTED",social_post_text:n,social_posted_at:r}),h(!1),x("à¹‚à¸žà¸ªà¸•à¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ªà¸³à¹€à¸£à¹‡à¸ˆà¹à¸¥à¹‰à¸§"),window.setTimeout(()=>{s()},500)}catch(e){console.error("Social post failed",e),x("à¹‚à¸žà¸ªà¸•à¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ")}finally{c(!1)}}};return a.jsx(i.Z,{isOpen:t,title:"à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹‚à¸žà¸ªà¸•à¹Œ Social",onClose:s,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[u?a.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-3 py-2 text-sm text-emerald-700",children:u}):null,a.jsx("div",{className:"rounded-xl border border-slate-200/70 bg-slate-50 p-3 text-sm text-slate-700",children:a.jsx("p",{className:"whitespace-pre-wrap leading-relaxed",children:m||"-"})}),a.jsx("div",{className:"rounded-xl border border-slate-200/70 bg-white p-3",children:a.jsx(n.Z,{googleUrl:e?.map_link,myMapUrl:e?.mymaps_url})}),(0,a.jsxs)("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx(d.Z,{type:"button",variant:"secondary",onClick:()=>void h(!0),children:"à¸„à¸±à¸”à¸¥à¸­à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡"}),a.jsx(d.Z,{type:"button",onClick:f,disabled:o||!m,children:o?"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸žà¸ªà¸•à¹Œ...":"Post à¸¥à¸‡à¸ªà¸·à¹ˆà¸­ social"})]})]})})}let f=e=>{switch(e){case"RED":return"border border-rose-200/80 bg-rose-50 text-rose-700";case"YELLOW":return"border border-amber-200/80 bg-amber-50 text-amber-700";default:return"border border-emerald-200/80 bg-emerald-50 text-emerald-700"}};function _({status:e,label:t}){return a.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${f(e)}`,children:t})}var b=s(6792),g=s(5329),j=s(9175),N=s(1223);function y({options:e,value:t,onChange:s,className:l}){return a.jsx("div",{role:"group",className:(0,N.cn)("inline-flex items-center rounded-full bg-slate-100/80 p-1 text-sm shadow-inner",l),children:e.map(e=>{let l=t===e.id;return a.jsx("button",{type:"button",onClick:()=>s(e.id),className:(0,N.cn)("rounded-full px-4 py-1.5 text-xs font-semibold uppercase tracking-wide transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-fuchsia-300 focus-visible:ring-offset-2",l?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-900"),children:e.label},e.id)})})}var v=s(8927),w=s(1632);let k=e=>{if(!e)return null;let t=e.match(/filename\*=UTF-8''([^;]+)/i);if(t?.[1])try{return decodeURIComponent(t[1])}catch{return t[1]}let s=e.match(/filename="?([^";]+)"?/i);return s?.[1]??null},C=e=>{if("PENDING"===(e.nakhon_status??"PENDING"))return"notify_nakhon";if(!("GENERATED"===e.doc_status||e.doc_generated_at))return"create_doc";let t=e.social_status??"DRAFT";if("PENDING_APPROVAL"===t)return"wait_approval";let s=e.notice_status??"NONE";return"POSTED"===t&&"SCHEDULED"!==s?"notify_outage_letter":"close_job"},E={notify_nakhon:"à¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£",create_doc:"à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸”à¸±à¸šà¹„à¸Ÿ",wait_approval:"à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´",notify_outage_letter:"à¹à¸ˆà¹‰à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸”à¸±à¸šà¹„à¸Ÿ",close_job:"à¸›à¸´à¸”à¸‡à¸²à¸™"},D=e=>e?"primary":"secondary";function S(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)([]),[u,m]=(0,r.useState)(!0),[p,f]=(0,r.useState)(null),[N,S]=(0,r.useState)(""),[P,O]=(0,r.useState)("all"),[Z,T]=(0,r.useState)("active"),[$,R]=(0,r.useState)(null),[L,U]=(0,r.useState)({}),[I,q]=(0,r.useState)(null),[G,A]=(0,r.useState)(""),[z,F]=(0,r.useState)(""),[K,M]=(0,r.useState)({}),[B,J]=(0,r.useState)(!1),[W,Y]=(0,r.useState)(null),[H,Q]=(0,r.useState)(null),[V,X]=(0,r.useState)(null),[ee,et]=(0,r.useState)({doc_issue_date:"",doc_purpose:"",doc_area_title:"",doc_time_start:"",doc_time_end:"",doc_area_detail:"",map_link:""}),[es,ea]=(0,r.useState)({}),[el,er]=(0,r.useState)(!1),[en,ei]=(0,r.useState)(null),[eo,ed]=(0,r.useState)(!1),[ec,eu]=(0,r.useState)(null),[ex,em]=(0,r.useState)(null),[ep,eh]=(0,r.useState)(null),ef=async()=>{m(!0),f(null),R(null);let{data:e,error:t}=await (0,v.DQ)();t?(f(t.message),s([])):s(e??[]),m(!1)},e_=()=>{q(null),A(""),F(""),M({}),J(!1)},eb=()=>{Y(null),et({doc_issue_date:"",doc_purpose:"",doc_area_title:"",doc_time_start:"",doc_time_end:"",doc_area_detail:"",map_link:""}),ea({}),er(!1)},eg=()=>{X(null)},ej=e=>{q(e),A(""),F(""),M({})},eN=e=>{Y(e),et({doc_issue_date:e.doc_issue_date??"",doc_purpose:e.doc_purpose??"",doc_area_title:e.doc_area_title??"",doc_time_start:e.doc_time_start??"",doc_time_end:e.doc_time_end??"",doc_area_detail:e.doc_area_detail??"",map_link:e.map_link??""}),ea({})},ey=e=>{ei(e),ed(!1),eu(null)},ev=async()=>{if(!en)return;ed(!0),eu(null);let{data:t}=await w.O.auth.getSession();if(!t.session){ed(!1),ei(null),e.push("/login");return}try{let t=await fetch(`/api/jobs/${en.id}/close`,{method:"POST",headers:{"Content-Type":"application/json"}});if(401===t.status){ed(!1),ei(null),e.push("/login");return}let s=await t.json().catch(()=>null);if(!t.ok||!s?.ok)throw Error(s?.error??"à¸›à¸´à¸”à¸‡à¸²à¸™à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ");em({message:"âœ… à¸›à¸´à¸”à¸‡à¸²à¸™à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢",tone:"success"}),await ef(),ei(null)}catch(t){let e=t instanceof Error?t.message:"à¸›à¸´à¸”à¸‡à¸²à¸™à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ";eu(e),em({message:e,tone:"error"})}finally{ed(!1)}},ew=async()=>{await w.O.auth.signOut(),await fetch("/api/auth/session",{method:"DELETE"}),e.push("/login")},ek=async()=>{if(!I)return;let e={};if(G||(e.date="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£"),z.trim()||(e.memoNo="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸šà¸±à¸™à¸—à¸¶à¸"),Object.keys(e).length>0){M(e);return}J(!0),M({});let{error:t}=await (0,v.Z6)(I.id,{date:G,memoNo:z.trim()});if(t){M({submit:t.message||"à¸šà¸±à¸™à¸—à¸¶à¸à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ"}),J(!1);return}s(e=>e.map(e=>e.id===I.id?{...e,nakhon_status:"NOTIFIED",nakhon_notified_date:G,nakhon_memo_no:z.trim()}:e)),e_()},eC=async e=>{R(null),U(t=>({...t,[e.id]:!0}));let{error:t}=await (0,v.uA)(e.id);if(t){R(t.message||"à¸­à¸±à¸›à¹€à¸”à¸•à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ"),U(t=>({...t,[e.id]:!1}));return}s(t=>t.map(t=>t.id===e.id?{...t,nakhon_status:"NOT_REQUIRED",nakhon_notified_date:null,nakhon_memo_no:null}:t)),U(t=>({...t,[e.id]:!1}))},eE=async()=>{if(!W)return;let e={};if(ee.doc_issue_date||(e.doc_issue_date="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸­à¸à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­"),ee.doc_purpose.trim()||(e.doc_purpose="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ"),ee.doc_area_title.trim()||(e.doc_area_title="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸šà¸£à¸´à¹€à¸§à¸“à¸—à¸µà¹ˆà¸”à¸±à¸š"),ee.doc_time_start.trim()||(e.doc_time_start="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¹€à¸§à¸¥à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸”à¸±à¸šà¹„à¸Ÿ"),ee.doc_time_end.trim()||(e.doc_time_end="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¹€à¸§à¸¥à¸²à¸ˆà¹ˆà¸²à¸¢à¹„à¸Ÿ"),ee.doc_area_detail.trim()||(e.doc_area_detail="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸”à¸±à¸šà¹„à¸Ÿ"),ee.map_link.trim()||(e.map_link="à¸à¸£à¸¸à¸“à¸²à¸£à¸°à¸šà¸¸à¸¥à¸´à¹‰à¸‡ google map"),Object.keys(e).length>0){ea(e);return}let t={doc_issue_date:ee.doc_issue_date,doc_purpose:ee.doc_purpose.trim(),doc_area_title:ee.doc_area_title.trim(),doc_time_start:ee.doc_time_start.trim(),doc_time_end:ee.doc_time_end.trim(),doc_area_detail:ee.doc_area_detail.trim(),map_link:ee.map_link.trim()};er(!0),ea({});try{let e=await fetch("/api/docs/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:W.id,payload:t})});if(!e.ok){let t=e.headers.get("Content-Type")??"",s="";if(t.includes("application/json")){let t=await e.json().catch(()=>null);s=t?.error||t?.message||""}else s=await e.text().catch(()=>"");ea({submit:s?`à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸”à¹‰ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ (${s})`:"à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸”à¹‰ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ"}),er(!1);return}let a=await e.blob(),l=window.URL.createObjectURL(a),r=k(e.headers.get("Content-Disposition"))??`outage-doc-${W.id}.docx`,n=document.createElement("a");n.href=l,n.download=r,document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(l);let i=new Date().toISOString();s(e=>e.map(e=>e.id===W.id?{...e,...t,doc_status:"GENERATED",doc_url:null,doc_generated_at:i}:e));try{let e=await fetch("/api/jobs/social-pending",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jobId:W.id})}),t=await e.json().catch(()=>null);e.ok&&t?.ok?s(e=>e.map(e=>e.id===W.id?{...e,social_status:"PENDING_APPROVAL"}:e)):console.warn("Failed to set social pending status",t)}catch(e){console.warn("Failed to set social pending status",e)}eb()}catch(e){console.error(e),ea({submit:"à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¹„à¸¡à¹ˆà¸ªà¸³à¹€à¸£à¹‡à¸ˆ à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ"}),er(!1)}},eD=(0,r.useMemo)(()=>{let e=N.trim().toLowerCase();return t.filter(e=>"closed"===Z?e.is_closed:!e.is_closed).filter(t=>!e||t.equipment_code.toLowerCase().includes(e)).filter(e=>"all"===P||x(e).color.toLowerCase()===P).sort((e,t)=>{if("closed"===Z){let s=e.closed_at?new Date(e.closed_at).getTime():0;return(t.closed_at?new Date(t.closed_at).getTime():0)-s}return c(e.outage_date).getTime()-c(t.outage_date).getTime()})},[t,N,P,Z]);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(g.Zb,{className:"bg-white/80",children:[a.jsx(g.Ol,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Jobs"}),a.jsx(g.ll,{children:"Krabi Outage Tracker"}),a.jsx(g.SZ,{children:"à¸•à¸´à¸”à¸•à¸²à¸¡à¸‡à¸²à¸™à¸”à¸±à¸šà¹„à¸Ÿà¸•à¸²à¸¡à¸à¸³à¸«à¸™à¸”à¹à¸¥à¸°à¸ªà¸–à¸²à¸™à¸°à¸§à¸±à¸™à¸„à¸‡à¹€à¸«à¸¥à¸·à¸­"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[ep?a.jsx(b.Z,{variant:"neutral",children:ep}):null,a.jsx(d.Z,{type:"button",variant:"secondary",size:"sm",onClick:ew,children:"à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸š"})]})]})}),(0,a.jsxs)(g.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-end lg:justify-between",children:[(0,a.jsxs)("div",{className:"flex w-full max-w-md flex-col gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-slate-600",children:"à¸„à¹‰à¸™à¸«à¸²à¸­à¸¸à¸›à¸à¸£à¸“à¹Œ"}),a.jsx(j.Z,{value:N,onChange:e=>S(e.target.value),placeholder:"à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸­à¸¸à¸›à¸à¸£à¸“à¹Œ"})]}),a.jsx(y,{options:[{id:"all",label:"à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"},{id:"green",label:"à¹€à¸‚à¸µà¸¢à¸§"},{id:"yellow",label:"à¹€à¸«à¸¥à¸·à¸­à¸‡"},{id:"red",label:"à¹à¸”à¸‡"}],value:P,onChange:O})]}),a.jsx(y,{options:[{id:"active",label:"à¸à¸³à¸¥à¸±à¸‡à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£"},{id:"closed",label:"à¸›à¸´à¸”à¹à¸¥à¹‰à¸§"}],value:Z,onChange:T})]})]}),ex?a.jsx(g.Zb,{className:`${"success"===ex.tone?"border-emerald-200 bg-emerald-50/80":"border-rose-200 bg-rose-50/80"}`,children:a.jsx(g.aY,{className:`py-3 text-sm ${"success"===ex.tone?"text-emerald-700":"text-rose-700"}`,children:ex.message})}):null,p?a.jsx(g.Zb,{className:"border-rose-200 bg-rose-50/80",children:a.jsx(g.aY,{className:"py-3 text-sm text-rose-700",children:p})}):null,$?a.jsx(g.Zb,{className:"border-amber-200 bg-amber-50/80",children:a.jsx(g.aY,{className:"py-3 text-sm text-amber-700",children:$})}):null,a.jsx("section",{className:"grid gap-4",children:u?a.jsx(g.Zb,{children:a.jsx(g.aY,{className:"py-8 text-center text-sm text-slate-500",children:"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."})}):0===eD.length?a.jsx(g.Zb,{children:a.jsx(g.aY,{className:"py-8 text-center text-sm text-slate-500",children:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸‡à¸²à¸™à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¸•à¸±à¸§à¸à¸£à¸­à¸‡"})}):eD.map(t=>{var s;let l=x(t),r="RED"===(s=l.color)?{strip:"bg-rose-200/80",badge:"border border-rose-200/80 bg-rose-50 text-rose-700",text:"text-rose-700"}:"YELLOW"===s?{strip:"bg-amber-200/80",badge:"border border-amber-200/80 bg-amber-50 text-amber-700",text:"text-amber-700"}:{strip:"bg-emerald-200/80",badge:"border border-emerald-200/80 bg-emerald-50 text-emerald-700",text:"text-emerald-700"},i=t.nakhon_status??"PENDING",o="NOTIFIED"===i,u=L[t.id]??!1,m=t.is_closed??!1,p="GENERATED"===t.doc_status||!!t.doc_generated_at,h="GENERATING"===t.doc_status,f=t.social_status??"DRAFT",j=t.notice_status??"NONE",N=C(t),y=E[N];return(0,a.jsxs)(g.Zb,{className:"group flex items-stretch overflow-hidden transition hover:-translate-y-0.5",children:[a.jsx("div",{className:`w-1.5 ${r.strip}`}),(0,a.jsxs)("div",{className:"flex w-full flex-col gap-4 p-5 sm:flex-row sm:items-start sm:justify-between",children:[(0,a.jsxs)("div",{className:"flex min-w-[240px] flex-1 flex-col gap-4",children:[(0,a.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>e.push(`/job/${t.id}`),onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),e.push(`/job/${t.id}`))},className:"cursor-pointer space-y-4 rounded-2xl outline-none transition focus-visible:ring-2 focus-visible:ring-fuchsia-300 focus-visible:ring-offset-2",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"text-sm text-slate-500",children:c(t.outage_date).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}),a.jsx("span",{className:`text-sm font-medium ${r.text}`,children:l.label})]}),a.jsx(_,{status:l.color,label:l.color})]}),m?(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium text-slate-600",children:[a.jsx(b.Z,{variant:"neutral",children:"à¸›à¸´à¸”à¹à¸¥à¹‰à¸§"}),(0,a.jsxs)("span",{children:["à¸›à¸´à¸”à¹€à¸¡à¸·à¹ˆà¸­"," ",t.closed_at?new Date(t.closed_at).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"]})]}):null,(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-lg font-semibold tracking-tight text-slate-900",children:t.equipment_code}),a.jsx("p",{className:"text-sm text-slate-600",children:t.note?.trim()||"à¹„à¸¡à¹ˆà¸¡à¸µà¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸"})]}),(o||"NOT_REQUIRED"===i)&&a.jsx("div",{className:"text-sm text-slate-600",children:o?(0,a.jsxs)(a.Fragment,{children:["à¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£à¹à¸¥à¹‰à¸§:"," ",a.jsx("span",{className:"font-medium text-slate-800",children:t.nakhon_notified_date?c(t.nakhon_notified_date).toLocaleDateString("th-TH",{year:"numeric",month:"short",day:"numeric"}):"-"})," ","| à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸šà¸±à¸™à¸—à¸¶à¸:"," ",a.jsx("span",{className:"font-medium text-slate-800",children:t.nakhon_memo_no??"-"})]}):a.jsx("span",{children:"à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£"})})]}),a.jsx(n.Z,{googleUrl:t.map_link,myMapUrl:t.mymaps_url})]}),m?null:(0,a.jsxs)("div",{className:"flex w-full flex-col items-stretch gap-2 sm:w-auto sm:min-w-[220px]",children:[(0,a.jsxs)("div",{className:"text-xs font-medium text-slate-500",children:["à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™à¸–à¸±à¸”à¹„à¸›:"," ",a.jsx("span",{className:"text-slate-700",children:y})]}),"PENDING"===i?(0,a.jsxs)(a.Fragment,{children:[a.jsx(d.Z,{type:"button",size:"sm",variant:D("notify_nakhon"===N),className:"w-full",onClick:()=>ej(t),children:"à¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£à¹à¸¥à¹‰à¸§"}),a.jsx(d.Z,{type:"button",variant:"secondary",size:"sm",className:"w-full",onClick:()=>eC(t),disabled:u,children:u?"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...":"à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£"})]}):a.jsx(a.Fragment,{children:p?t.doc_url?a.jsx(d.Z,{type:"button",size:"sm",variant:D("create_doc"===N),className:"w-full",onClick:()=>{if(t.doc_url){window.open(t.doc_url,"_blank","noopener,noreferrer");return}eN(t)},children:"à¸žà¸´à¸¡à¸žà¹Œà¹€à¸­à¸à¸ªà¸²à¸£"}):a.jsx(d.Z,{type:"button",variant:"secondary",size:"sm",className:"w-full",onClick:()=>eN(t),children:"à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸”à¹€à¸­à¸à¸ªà¸²à¸£à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡"}):a.jsx(d.Z,{type:"button",size:"sm",variant:D("create_doc"===N),className:"w-full",onClick:()=>eN(t),disabled:u||h,children:h?"à¸à¸³à¸¥à¸±à¸‡à¸ªà¸£à¹‰à¸²à¸‡...":"à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸”à¸±à¸šà¹„à¸Ÿ"})}),"PENDING_APPROVAL"===f||"POSTED"===f?a.jsx(d.Z,{type:"button",size:"sm",variant:D("wait_approval"===N),className:"w-full",onClick:()=>Q(t),children:"POSTED"===f?"Posted à¹à¸¥à¹‰à¸§à¸ªà¸·à¹ˆà¸­ Social":"à¸£à¸­à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´"}):null,"POSTED"===f?a.jsx(d.Z,{type:"button",size:"sm",variant:D("notify_outage_letter"===N),className:"w-full",onClick:()=>X(t),children:"SCHEDULED"===j?"à¸à¸³à¸«à¸™à¸”à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§ (à¹à¸à¹‰à¹„à¸‚à¹„à¸”à¹‰)":"à¹à¸ˆà¹‰à¸‡à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸”à¸±à¸šà¹„à¸Ÿ"}):null,"SCHEDULED"!==j||m?null:a.jsx(d.Z,{type:"button",size:"sm",variant:D("close_job"===N),className:"w-full",onClick:()=>ey(t),children:"à¸›à¸´à¸”à¸‡à¸²à¸™"})]})]})]},t.id)})}),a.jsx(i.Z,{isOpen:!!I,title:"à¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£à¹à¸¥à¹‰à¸§",onClose:e_,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¸§à¸±à¸™à¸—à¸µà¹ˆà¹à¸ˆà¹‰à¸‡à¸¨à¸¹à¸™à¸¢à¹Œà¸™à¸„à¸£",a.jsx(j.Z,{type:"date",value:G,onChange:e=>A(e.target.value),required:!0}),K.date?a.jsx("span",{className:"text-xs text-red-600",children:K.date}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¹€à¸¥à¸‚à¸—à¸µà¹ˆà¸šà¸±à¸™à¸—à¸¶à¸",a.jsx(j.Z,{type:"text",value:z,onChange:e=>F(e.target.value),required:!0}),K.memoNo?a.jsx("span",{className:"text-xs text-red-600",children:K.memoNo}):null]}),K.submit?a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:K.submit}):null,(0,a.jsxs)("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx(d.Z,{type:"button",variant:"secondary",onClick:e_,children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),a.jsx(d.Z,{type:"button",onClick:ek,disabled:B,children:B?"à¸à¸³à¸¥à¸±à¸‡à¸šà¸±à¸™à¸—à¸¶à¸...":"à¸•à¸à¸¥à¸‡"})]})]})}),a.jsx(i.Z,{isOpen:!!W,title:"à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸­à¸à¸ªà¸²à¸£à¸”à¸±à¸šà¹„à¸Ÿ",onClose:eb,children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¸«à¸™à¸±à¸‡à¸ªà¸·à¸­à¸¥à¸‡à¸§à¸±à¸™à¸—à¸µà¹ˆ",a.jsx(j.Z,{type:"date",value:ee.doc_issue_date,onChange:e=>et(t=>({...t,doc_issue_date:e.target.value})),required:!0}),es.doc_issue_date?a.jsx("span",{className:"text-xs text-red-600",children:es.doc_issue_date}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¸”à¸±à¸šà¹„à¸Ÿà¹€à¸žà¸·à¹ˆà¸­",a.jsx(j.Z,{type:"text",value:ee.doc_purpose,onChange:e=>et(t=>({...t,doc_purpose:e.target.value})),required:!0}),es.doc_purpose?a.jsx("span",{className:"text-xs text-red-600",children:es.doc_purpose}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¸šà¸£à¸´à¹€à¸§à¸“à¸—à¸µà¹ˆà¸”à¸±à¸š",a.jsx(j.Z,{type:"text",value:ee.doc_area_title,onChange:e=>et(t=>({...t,doc_area_title:e.target.value})),required:!0}),es.doc_area_title?a.jsx("span",{className:"text-xs text-red-600",children:es.doc_area_title}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¹€à¸§à¸¥à¸²à¹€à¸£à¸´à¹ˆà¸¡à¸”à¸±à¸šà¹„à¸Ÿ",a.jsx(j.Z,{type:"time",value:ee.doc_time_start,onChange:e=>et(t=>({...t,doc_time_start:e.target.value})),required:!0}),es.doc_time_start?a.jsx("span",{className:"text-xs text-red-600",children:es.doc_time_start}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¹€à¸§à¸¥à¸²à¸ˆà¹ˆà¸²à¸¢à¹„à¸Ÿ",a.jsx(j.Z,{type:"time",value:ee.doc_time_end,onChange:e=>et(t=>({...t,doc_time_end:e.target.value})),required:!0}),es.doc_time_end?a.jsx("span",{className:"text-xs text-red-600",children:es.doc_time_end}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¸žà¸·à¹‰à¸™à¸—à¸µà¹ˆà¸”à¸±à¸šà¹„à¸Ÿ",a.jsx("textarea",{value:ee.doc_area_detail,onChange:e=>et(t=>({...t,doc_area_detail:e.target.value})),rows:3,className:"w-full rounded-xl border border-slate-200/80 bg-white px-3 py-2 text-sm text-slate-700 shadow-sm transition focus:border-fuchsia-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-200",required:!0}),es.doc_area_detail?a.jsx("span",{className:"text-xs text-red-600",children:es.doc_area_detail}):null]}),(0,a.jsxs)("label",{className:"flex flex-col gap-2 text-sm font-medium text-slate-700",children:["à¸¥à¸´à¹‰à¸‡ google map",a.jsx(j.Z,{type:"url",value:ee.map_link,onChange:e=>et(t=>({...t,map_link:e.target.value})),required:!0}),es.map_link?a.jsx("span",{className:"text-xs text-red-600",children:es.map_link}):null]}),es.submit?a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:es.submit}):null,(0,a.jsxs)("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx(d.Z,{type:"button",variant:"secondary",onClick:eb,children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),a.jsx(d.Z,{type:"button",onClick:eE,disabled:el,children:el?"à¸à¸³à¸¥à¸±à¸‡à¸ªà¸£à¹‰à¸²à¸‡...":"à¸ªà¸£à¹‰à¸²à¸‡"})]})]})}),a.jsx(h,{job:H,isOpen:!!H,onClose:()=>{Q(null)},onJobUpdate:(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,...t}:s)),Q(s=>s?.id===e?{...s,...t}:s)}}),a.jsx(o.Z,{job:V,open:!!V,onOpenChange:e=>{e||eg()},onJobUpdate:(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,...t}:s)),X(s=>s?.id===e?{...s,...t}:s)}}),a.jsx(i.Z,{isOpen:!!en,title:"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸›à¸´à¸”à¸‡à¸²à¸™?",onClose:()=>ei(null),children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx("p",{className:"text-sm text-slate-600",children:'à¸›à¸´à¸”à¸‡à¸²à¸™à¹à¸¥à¹‰à¸§à¸ˆà¸°à¸–à¸¹à¸à¸¢à¹‰à¸²à¸¢à¹„à¸›à¸—à¸µà¹ˆ "à¸‡à¸²à¸™à¸—à¸µà¹ˆà¸›à¸´à¸”à¹à¸¥à¹‰à¸§" à¹à¸¥à¸°à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹à¸à¹‰à¹„à¸‚à¹„à¸”à¹‰'}),ec?a.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-700",children:ec}):null,(0,a.jsxs)("div",{className:"flex flex-wrap justify-end gap-3",children:[a.jsx(d.Z,{type:"button",variant:"secondary",onClick:()=>ei(null),children:"à¸¢à¸à¹€à¸¥à¸´à¸"}),a.jsx(d.Z,{type:"button",onClick:ev,disabled:eo,children:eo?"à¸à¸³à¸¥à¸±à¸‡à¸›à¸´à¸”à¸‡à¸²à¸™...":"à¸¢à¸·à¸™à¸¢à¸±à¸™à¸›à¸´à¸”à¸‡à¸²à¸™"})]})]})})]})}},580:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(326),l=s(7577),r=s(434),n=s(5047);let i=[{label:"Dashboard",href:"/dashboard"},{label:"Jobs",href:"/jobs"},{label:"Calendar",href:"/calendar"}];function o({isOpen:e,onClose:t}){let s=(0,n.usePathname)(),l=()=>(0,a.jsxs)("div",{className:"flex h-full flex-col bg-white/80 px-5 py-6 backdrop-blur-xl",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[a.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-gradient-to-tr from-fuchsia-500 via-purple-500 to-pink-500 text-sm font-semibold text-white shadow-md",children:"KB"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"KB Outage"}),a.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Operations"})]})]}),a.jsx("nav",{className:"mt-8 flex-1 space-y-2",children:i.map(e=>{let l=s===e.href||s.startsWith(`${e.href}/`)||"/jobs"===e.href&&s.startsWith("/job/");return(0,a.jsxs)(r.default,{href:e.href,className:`flex items-center justify-between rounded-full px-4 py-2 text-sm font-medium transition ${l?"bg-white text-slate-900 shadow-sm":"text-slate-600 hover:bg-white/70 hover:text-slate-900"}`,onClick:t,children:[a.jsx("span",{children:e.label}),l?a.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-gradient-to-r from-fuchsia-500 to-pink-500"}):null]},e.href)})}),a.jsx("div",{className:"rounded-2xl border border-slate-200/80 bg-white px-4 py-4 text-xs text-slate-500 shadow-sm",children:"Premium console layout â€¢ v2"})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:`fixed inset-0 z-40 transition lg:hidden ${e?"pointer-events-auto":"pointer-events-none"}`,children:[a.jsx("div",{className:`absolute inset-0 bg-slate-900/40 transition-opacity ${e?"opacity-100":"opacity-0"}`,onClick:t}),a.jsx("aside",{className:`absolute left-0 top-0 h-full w-72 transform bg-white shadow-xl transition-transform ${e?"translate-x-0":"-translate-x-full"}`,children:l()})]}),a.jsx("aside",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-72 lg:flex-col lg:border-r lg:border-slate-200/70 lg:bg-white/80 lg:backdrop-blur-xl",children:l()})]})}var d=s(6792),c=s(9837);let u={"/dashboard":"Dashboard","/jobs":"Jobs","/calendar":"Calendar","/job":"Job detail"},x=e=>{let t=Object.keys(u).find(t=>e===t||e.startsWith(`${t}/`));return t?u[t]:"KB Outage"};function m({onMenuClick:e}){let t=(0,n.usePathname)(),s=x(t),l="/dashboard"===t||t.startsWith("/dashboard/"),i="/jobs"===t||t.startsWith("/jobs/"),o="/calendar"===t||t.startsWith("/calendar/"),u=t.startsWith("/job/");return a.jsx("header",{className:"sticky top-0 z-30 border-b border-slate-200/70 bg-white/80 backdrop-blur",children:(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 py-4 sm:px-6 lg:px-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:e,className:"inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-200/80 bg-white text-slate-600 shadow-sm transition hover:bg-slate-50 lg:hidden","aria-label":"Open menu",children:"â˜°"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Current view"}),a.jsx("h1",{className:"text-xl font-semibold tracking-tight text-slate-900",children:s})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l?a.jsx(r.default,{href:"/jobs",className:(0,c.$)({variant:"secondary",size:"sm"}),children:"à¸”à¸¹à¸‡à¸²à¸™à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"}):null,i?a.jsx(r.default,{href:"/new",className:(0,c.$)({variant:"primary",size:"sm"}),children:"+ à¸ªà¸£à¹‰à¸²à¸‡à¸‡à¸²à¸™"}):null,o?a.jsx(r.default,{href:"/jobs",className:(0,c.$)({variant:"secondary",size:"sm"}),children:"à¹„à¸›à¸—à¸µà¹ˆ Jobs"}):null,u?a.jsx(r.default,{href:"/jobs",className:(0,c.$)({variant:"secondary",size:"sm"}),children:"à¸à¸¥à¸±à¸šà¹„à¸› Jobs"}):null,a.jsx(d.Z,{variant:"accent",children:"Premium"})]})]})})}function p({children:e}){let[t,s]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"min-h-screen bg-[#fafafa] text-slate-900",children:[a.jsx(o,{isOpen:t,onClose:()=>s(!1)}),(0,a.jsxs)("div",{className:"flex min-h-screen flex-col lg:pl-72",children:[a.jsx(m,{onMenuClick:()=>s(!0)}),a.jsx("main",{className:"flex-1 px-4 pb-12 pt-6 sm:px-6 lg:px-10",children:a.jsx("div",{className:"mx-auto w-full max-w-6xl",children:e})})]})]})}},5377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});var a=s(8570);let l=(0,a.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\app\(app)\jobs\page.tsx`),{__esModule:r,$$typeof:n}=l;l.default;let i=(0,a.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\app\(app)\jobs\page.tsx#default`)},3315:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(9510),l=s(8570);let r=(0,l.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\components\layout\AppShell.tsx`),{__esModule:n,$$typeof:i}=r;r.default;let o=(0,l.createProxy)(String.raw`C:\Users\506870\Desktop\KB-outage\src\components\layout\AppShell.tsx#default`);function d({children:e}){return a.jsx(o,{children:e})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,471,496,157,221],()=>s(5724));module.exports=a})();