(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1356:function(e,t,r){Promise.resolve().then(r.bind(r,4675))},4675:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(7437),n=r(7138),a=r(2265),l=r(649),i=r(4608);let c=["DRAFT","DOC_READY","SOCIAL_POSTED","NOTICE_SCHEDULED"],o={DRAFT:"DRAFT",DOC_READY:"DOCUMENT READY",SOCIAL_POSTED:"SOCIAL POSTED",NOTICE_SCHEDULED:"NOTICE SCHEDULED"};async function d(){let e=await fetch("/api/dashboard/jobs?filter=open&limit=200",{cache:"no-store"});if(!e.ok)throw Error("Failed to load dashboard jobs");let t=await e.json();if(!t.ok)throw Error(t.error);return t.jobs}function u(){let[e,t]=(0,a.useState)([]),[r,u]=(0,a.useState)(null),[x,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=!0;return f(!0),d().then(r=>{e&&(t(r),u(null))}).catch(r=>{console.error("Failed to load dashboard jobs",r),e&&(t([]),u("ไม่สามารถโหลดข้อมูลงานได้ กรุณาลองใหม่"))}).finally(()=>{e&&f(!1)}),()=>{e=!1}},[]);let h=(0,a.useMemo)(()=>c.reduce((t,r)=>(t[r]=e.filter(e=>e.step===r&&!0!==e.is_closed),t),{}),[e]);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("header",{className:"space-y-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:"Overview"}),(0,s.jsx)("h1",{className:"text-3xl font-semibold tracking-tight text-slate-900",children:"Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"ติดตามสถานะงานแต่ละรายการและงานที่ต้องทำต่อ"})]}),r?(0,s.jsx)(i.Zb,{className:"border-rose-200 bg-rose-50/70",children:(0,s.jsx)(i.aY,{className:"py-4 text-sm text-rose-700",children:r})}):null,(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(i.ll,{children:"Pipeline"}),(0,s.jsx)(i.SZ,{children:"งานที่ยังต้องดำเนินการตามขั้นตอน"})]}),(0,s.jsx)(l.Z,{variant:"accent",children:"Live"})]})}),(0,s.jsx)(i.aY,{children:(0,s.jsx)("div",{className:"grid gap-4 lg:grid-cols-4",children:c.map(e=>{var t;return(0,s.jsxs)("div",{className:"flex flex-col rounded-2xl border border-slate-200/70 bg-white/80 p-4 shadow-sm",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.25em] text-slate-400",children:o[e]}),(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-gradient-to-r from-fuchsia-500 to-pink-500"})]}),(0,s.jsx)("div",{className:"mt-4 space-y-2",children:x?(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"กำลังโหลด..."}):(null===(t=h[e])||void 0===t?void 0:t.length)?h[e].map(e=>{var t;return(0,s.jsx)(n.default,{href:"/job/".concat(e.id),className:"block rounded-xl border border-slate-200/70 bg-white px-3 py-2 text-xs font-semibold text-slate-900 shadow-sm transition hover:border-slate-300 hover:shadow-md",children:null!==(t=e.equipment_code)&&void 0!==t?t:"—"},e.id)}):(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"ไม่มีงาน"})})]},e)})})})]})]})}},649:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(7437),n=r(9354);let a={default:"border border-slate-200/80 bg-slate-100/70 text-slate-600",accent:"border border-fuchsia-200/70 bg-fuchsia-50 text-fuchsia-700",success:"border border-emerald-200/80 bg-emerald-50 text-emerald-700",warning:"border border-amber-200/80 bg-amber-50 text-amber-700",danger:"border border-rose-200/80 bg-rose-50 text-rose-700",neutral:"border border-slate-200/70 bg-white text-slate-700"};function l(e){let{variant:t="default",className:r,...l}=e;return(0,s.jsx)("span",{...l,className:(0,n.cn)("inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-semibold",a[t],r)})}},4608:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return a},aY:function(){return o},ll:function(){return i}});var s=r(7437),n=r(9354);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{...r,className:(0,n.cn)("rounded-2xl border border-slate-200/70 bg-white shadow-sm",t)})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{...r,className:(0,n.cn)("px-5 pt-5",t)})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("h3",{...r,className:(0,n.cn)("text-lg font-semibold tracking-tight text-slate-900",t)})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("p",{...r,className:(0,n.cn)("text-sm text-slate-600",t)})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("div",{...r,className:(0,n.cn)("px-5 pb-5",t)})}},9354:function(e,t,r){"use strict";function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}r.d(t,{cn:function(){return s}})}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=1356)}),_N_E=e.O()}]);